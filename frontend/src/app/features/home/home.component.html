<mat-toolbar class="header" role="navigation">
  <div class="toolbar-title-container">
    <mat-icon matListItemIcon>view_kanban</mat-icon>
    <a matButton class="toolbar-title">EpiTrello</a>
  </div>
  <div class="toolbar-profile-container">
    <button mat-button [matMenuTriggerFor]="profileMenu" class="toolbar-profile">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu #profileMenu="matMenu" >
      <div class="profile-info" style="padding: 0 16px 8px;">
    <p><strong>User:</strong> {{ user?.name }}</p>
      </div>
      <mat-divider></mat-divider>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
      <button mat-menu-item (click)="deleteAccount()" color="warn">
        <mat-icon>delete_forever</mat-icon>
        <span>Delete account</span>
      </button>
    </mat-menu>
  </div>
</mat-toolbar>

<div class="home-container">
    <div class="left-sidenav-container" >
        <mat-nav-list style="padding-bottom: 8px;">
            <mat-list-item button class="left-sidenav-btn" routerLink=''>
                <mat-icon matListItemIcon class="left-sidenav-btn-icon">home</mat-icon>
                <div matListItemTitle class="left-sidenav-btn-title">Home</div>
            </mat-list-item>
        </mat-nav-list>
        <mat-divider></mat-divider>
                <div style='
          display: flex;
          flex-direction: row;
          font-weight: 400;
          font-size: 12px;
          align-items: center;
          padding: 8px 16px;'>
          Workspace
        </div>
        <mat-nav-list style="padding-bottom: 8px;">
            <mat-list-item button class="left-sidenav-btn" routerLink="w/board" routerLinkActive="active">
                <mat-icon matListItemIcon class="left-sidenav-btn-icon">view_kanban</mat-icon>
                <div matListItemTitle class="left-sidenav-btn-title">Boards</div>
            </mat-list-item>
            <mat-list-item button class="left-sidenav-btn" routerLink="w/invitations" routerLinkActive="active">
                <mat-icon matListItemIcon class="left-sidenav-btn-icon">mail</mat-icon>
                <div matListItemTitle class="left-sidenav-btn-title">Invitations</div>
            </mat-list-item>
        </mat-nav-list>
    </div>

    <div class="main-container">
        @if (isHomeSection) {
        <mat-card class="welcome-banner" appearance="raised">
          <div class="welcome-left">
            <div class="welcome-title">Welcome{{ user?.name ? ', ' + user?.name : '' }}!</div>
            <div class="welcome-sub">Create your first board and organize everything in one place.</div>
            <div class="welcome-actions">
            </div>
          </div>
          <div class="welcome-right">
            <mat-icon class="welcome-illustration">emoji_objects</mat-icon>
          </div>
        </mat-card>
        }

        <router-outlet></router-outlet>
    </div>

    <div class="right-sidenav-container">
      <!--
        <div style='
          display: flex;
          flex-direction: row;
          align-items: center;
          padding: 0 16px;'>
          <div style="text-align: center; height: 16px;">
            <mat-icon matListItemIcon style="font-size: 16px;">schedule</mat-icon>
          </div>
          <div>Recently viewed</div>
        </div>
        <mat-nav-list>
            <mat-list-item button class="board-sidenav-btn">
                <div matListItemTitle class="board-sidenav-btn-title">My EpiTrello board</div>
                <div matListItemLine class="board-sidenav-desc" >EpiTrello workspace</div>
            </mat-list-item>
        </mat-nav-list>
      -->
        <div style='
          display: flex;
          flex-direction: row;
          font-weight: 400;
          font-size: 12px;
          align-items: center;
          padding: 8px 16px;'>
          Links
        </div>
        <mat-nav-list>
          <div class="create-board-anchor" style="position: relative;">
            <mat-list-item button class="links-sidenav-btn" (click)="openCreateBoardDialog()">
              <mat-icon matListItemIcon>add</mat-icon>
              <div matListItemTitle class="links-sidenav-btn-title">Create a board</div>
            </mat-list-item>
            @if (showCreatePanel) {
              <app-create-board-panel (closed)="closeCreatePanel()"></app-create-board-panel>
            }
          </div>
        </mat-nav-list>
    </div>
</div>

<!--
<div class="home-container">
    <div class="left-home-sidebar" role="navigation">
        <div style='
          display: flex;
          flex-direction: row;
          padding-left: 16px;
          align-items: center;'>
            <div style="text-align: center; height: 16px;  ">
              <mat-icon matListItemIcon style="font-size: 16px;">schedule</mat-icon>
            </div>
            <div matSubheader style="margin-left: 0;">Recently viewed</div>
        </div>
        <mat-nav-list>
            <mat-list-item class="left-home-sidebar-btn">
              <div >
                <h4 matListItemTitle>My EpiTrello board</h4>
                <p style="font-size: small;" matListItemLine class="demo-2">EpiTrello workspace</p>
              </div>
            </mat-list-item>
        </mat-nav-list>
                <div style="display: flex; flex-direction: row; align-items: center;">
            <h5 matSubheader>Links</h5>
        </div>
        <mat-nav-list>
            <mat-list-item button style=" outline: none; border-radius: 5px; height: 40px;">
              <mat-icon matListItemIcon>add</mat-icon>
              <h3 matListItemTitle>Create a board</h3>
            </mat-list-item>
        </mat-nav-list>
    </div>

  <div class="boards-container">
    @if ((boards$ | async)?.length === 0) {
      <div class="no-boards">
      <p>You don't have any boards yet. Create your first board to get started!</p>
      </div>
    }


    <div class="boards-grid">
      @for (board of (boards$ | async); track board.id) {
        <mat-card class="board-card" (click)="openBoard(board.id)">
        <mat-card-header>
          <mat-card-title>{{ board.title }}</mat-card-title>
          <mat-card-subtitle>Created: {{ board.createdAt | date }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions>
          <button mat-icon-button color="warn" (click)="deleteBoard($event, board.id)" aria-label="Delete board">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-card-actions>
        </mat-card>
      }
    </div>
  </div>

</div>
-->
